# API 压力测试工具 - 腾讯云一键部署指南

本指南提供最简单的"傻瓜式"操作步骤，即使是零基础的新手也能在 10 分钟内完成部署。

## 第一步：购买腾讯云服务器

### 1.1 登录腾讯云

打开浏览器，访问 [腾讯云官网](https://cloud.tencent.com/)，使用微信扫码或账号密码登录。

### 1.2 购买服务器

登录后，按以下步骤操作：

1. 点击顶部菜单 **产品** → **云服务器**
2. 点击 **立即选购**
3. 按下表选择配置：

| 配置项 | 推荐选择 |
| :--- | :--- |
| 计费模式 | 按量计费（测试）或 包年包月（长期） |
| 地域 | 选择离您最近的地域（如：上海、广州） |
| 机型 | 标准型 S5 或 SA2 |
| CPU/内存 | **最低 2核4G**（推荐） |
| 镜像 | **Ubuntu Server 22.04 LTS 64位** |
| 系统盘 | 50GB 高性能云硬盘 |
| 公网带宽 | 按流量计费，5Mbps |
| 安全组 | **放通 22, 80, 443 端口** |
| 登录方式 | 设置密码（请牢记！） |

4. 确认配置，点击 **立即购买** 并完成支付。

### 1.3 记录服务器信息

购买成功后，进入 **控制台** → **云服务器**，找到您的服务器，记录以下信息：

- **公网 IP 地址**：例如 `119.xxx.xxx.xxx`
- **登录密码**：您设置的密码

## 第二步：连接服务器

### 方法一：腾讯云网页终端（最简单，推荐）

1. 在云服务器控制台，找到您的服务器
2. 点击右侧 **登录** 按钮
3. 选择 **标准登录方式**
4. 用户名输入 `root`，密码输入您设置的密码
5. 点击 **登录**

### 方法二：SSH 工具（Windows 用户）

1. 下载并安装 [MobaXterm](https://mobaxterm.mobatek.net/)
2. 打开软件，点击 **Session** → **SSH**
3. 在 **Remote host** 输入您的服务器公网 IP
4. 点击 **OK**，然后输入用户名 `root` 和密码

### 方法三：终端命令（Mac / Linux 用户）

打开终端，输入以下命令（将 `您的服务器IP` 替换为实际 IP）：

```bash
ssh root@您的服务器IP
```

输入密码后即可连接。

## 第三步：一键部署（核心步骤）

成功连接服务器后，只需 **复制并粘贴** 以下命令，然后按回车键执行：

```bash
apt-get update && apt-get install -y git && \
git clone https://github.com/s253567675/api-stress-tester.git && \
cd api-stress-tester && \
chmod +x deploy-all-in-one.sh && \
./deploy-all-in-one.sh
```

**然后等待...**

脚本会自动完成以下所有操作：
1. 安装 Docker 和 Docker Compose
2. 生成所有配置文件
3. 构建应用镜像
4. 启动数据库、后端和前端服务
5. 初始化数据库并创建管理员账号

整个过程大约需要 **5-10 分钟**。当您看到以下信息时，表示部署成功：

```
==============================================
🎉 部署完成！
==============================================

访问地址: http://您的服务器IP
管理员用户名: admin
管理员密码: admin123
```

## 第四步：访问您的应用

打开浏览器，在地址栏输入：

```
http://您的服务器公网IP
```

例如：`http://119.xxx.xxx.xxx`

使用以下凭据登录：

| 项目 | 值 |
| :--- | :--- |
| 用户名 | `admin` |
| 密码 | `admin123` |

**恭喜您！部署成功！**

## 常用运维命令

部署完成后，如果您需要管理服务，可以使用以下命令：

```bash
# 进入项目目录
cd api-stress-tester

# 查看所有服务状态
docker compose ps

# 查看实时日志
docker compose logs -f

# 重启所有服务
docker compose restart

# 停止所有服务
docker compose down

# 重新启动所有服务
docker compose up -d
```

## 常见问题解答

### Q1: 访问网站显示"无法访问此网站"

**解决方案：**

1. 检查腾讯云安全组是否已放通 80 端口。
2. 在服务器上执行 `docker compose ps`，确认所有服务状态为 `Up`。
3. 如果服务未启动，执行 `docker compose up -d` 重新启动。

### Q2: 登录时提示"用户名或密码错误"

**解决方案：**

确认您使用的是默认凭据：用户名 `admin`，密码 `admin123`。如果仍然无法登录，可能是数据库初始化未完成，请稍等片刻后重试。

### Q3: 如何更新到最新版本？

```bash
cd api-stress-tester
git pull
docker compose down
docker compose up -d --build
```

### Q4: 如何配置域名和 HTTPS？

1. 在您的域名管理平台添加一条 A 记录，指向服务器公网 IP。
2. 安装 Certbot 并申请免费 SSL 证书：

```bash
apt install -y certbot python3-certbot-nginx
certbot --nginx -d your-domain.com
```

## 技术支持

如果您在部署过程中遇到任何问题，可以：

1. 查看服务日志：`docker compose logs -f`
2. 检查 Nginx 日志：`docker compose logs nginx`
3. 检查应用日志：`docker compose logs app`

祝您使用愉快！
